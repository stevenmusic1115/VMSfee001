<!DOCTYPE html>
<html>
<head>
    <base target="_top">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VMS Tuition Fee Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 800px;
            width: 100%;
            padding: 40px;
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 32px;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 700;
            font-size: 16px;
        }

        select, input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 17px;
            transition: all 0.3s;
            background: white;
            font-weight: 500;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .radio-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .promo-plans-grid {
            grid-template-columns: 1fr 1fr;
        }

        .promo-plans-grid.single-button {
            grid-template-columns: 1fr;
        }

        .promo-plans-grid.single-button #v4Option {
            display: none;
        }

        .radio-option {
            width: 100%;
        }

        #v4Option {
            visibility: hidden;
            pointer-events: none;
        }

        #v4Option.visible {
            visibility: visible;
            pointer-events: auto;
        }

        .radio-option input[type="radio"] {
            display: none;
        }

        .radio-option label {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
            font-size: 16px;
            min-height: 60px;
        }

        .radio-option input[type="radio"]:checked + label {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .radio-option label:hover {
            border-color: #667eea;
        }

        .checkbox-option {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .checkbox-option:hover {
            border-color: #667eea;
        }

        .checkbox-option input[type="checkbox"] {
            width: auto;
            margin-right: 10px;
            cursor: pointer;
        }

        .checkbox-option.checked {
            background: #f0f4ff;
            border-color: #667eea;
        }

        .result-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
        }

        .result-title {
            font-size: 22px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 700;
        }

        .fee-item {
            display: flex;
            justify-content: space-between;
            padding: 14px 0;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .fee-item:last-child {
            border-bottom: none;
        }

        .fee-label {
            font-size: 17px;
            font-weight: 600;
        }

        .fee-value {
            font-size: 17px;
            font-weight: 700;
        }

        .total-row {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid rgba(255,255,255,0.3);
            font-size: 22px;
            font-weight: 800;
        }

        .note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
            font-size: 13px;
            color: #856404;
        }

        .promo-badge {
            display: inline-block;
            background: #28a745;
            color: white;
            padding: 3px 8px;
            border-radius: 5px;
            font-size: 11px;
            margin-left: 8px;
            font-weight: 600;
        }

        #keyboardSection {
            display: none;
        }

        @media (max-width: 600px) {
            .container {
                padding: 25px;
            }

            h1 {
                font-size: 24px;
            }

            .radio-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üê∞ VMS Music School üê∞</h1>
        <div class="subtitle">Tuition Fee Calculator</div>

        <div class="form-group">
            <label>üê∞ Lesson Type üê∞</label>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" id="individual" name="lessontype" value="individual">
                    <label for="individual">Individual Lesson</label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="group" name="lessontype" value="group">
                    <label for="group">Group Lesson</label>
                </div>
            </div>
        </div>

        <div class="form-group" id="ageGroupSection" style="display:none;">
            <label>üê∞ Age Group üê∞</label>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" id="kid" name="agegroup" value="kid">
                    <label for="kid">Kid<br>(2-12 years old)</label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="adult" name="agegroup" value="adult">
                    <label for="adult">Adult<br>(‚â•13 years old)</label>
                </div>
            </div>
        </div>

        <div class="form-group" id="individualInstrumentSection" style="display:none;">
            <label>üê∞ Select Instrument üê∞</label>
            <select id="individualInstrument">
                <option value="">-- Please Select --</option>
                <option value="piano">Piano</option>
                <option value="guitar">Guitar</option>
                <option value="ukulele">Ukulele</option>
                <option value="violin">Violin</option>
                <option value="singplay">Sing & Play</option>
            </select>
        </div>

        <div class="form-group" id="groupInstrumentSection" style="display:none;">
            <label>üê∞ Select Instrument üê∞</label>
            <select id="groupInstrument">
                <option value="">-- Please Select --</option>
                <option value="guitar_acoustic">Guitar (Acoustic)</option>
                <option value="guitar_classical">Guitar (Classical)</option>
                <option value="guitar_electric">Guitar (Electric)</option>
                <option value="ukulele">Ukulele</option>
                <option value="singplay">Sing & Play</option>
            </select>
        </div>

        <div class="form-group" id="durationSection" style="display:none;">
            <label>üê∞ Lesson Duration üê∞</label>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" id="duration30" name="duration" value="30">
                    <label for="duration30">30 Minutes</label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="duration45" name="duration" value="45">
                    <label for="duration45">45 Minutes</label>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>üê∞ Lesson Day Type üê∞</label>
            <div class="radio-group">
                <div class="radio-option">
                    <input type="radio" id="weekday" name="daytype" value="weekday">
                    <label for="weekday">Weekday<br>(Mon-Thu)</label>
                </div>
                <div class="radio-option">
                    <input type="radio" id="weekend" name="daytype" value="weekend">
                    <label for="weekend">Weekend<br>(Fri-Sun)</label>
                </div>
            </div>
        </div>

        <div class="form-group" id="planSection" style="display:none;">
            <div id="promotionalPlansSection">
                <label>üê∞ Promotional Plans üê∞</label>
                <div class="radio-group promo-plans-grid">
                    <div class="radio-option">
                        <input type="radio" id="plan2month" name="plan" value="2month">
                        <label for="plan2month">First 2 Month Promotion<span class="promo-badge">PROMO</span></label>
                    </div>
                    <div class="radio-option" id="v4Option">
                        <input type="radio" id="planV4" name="plan" value="v4">
                        <label for="planV4">V4 Plan (4-Month)<span class="promo-badge">PIANO ONLY</span></label>
                    </div>
                </div>
            </div>

            <div style="margin-top: 25px;">
                <label>üê∞ Regular Plans üê∞</label>
                <div class="radio-group">
                    <div class="radio-option">
                        <input type="radio" id="plan3month" name="plan" value="3month">
                        <label for="plan3month">V Plan (3-Month)</label>
                    </div>
                    <div class="radio-option">
                        <input type="radio" id="plan1month" name="plan" value="1month">
                        <label for="plan1month">Monthly Plan</label>
                    </div>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>üê∞ Add-ons (Optional) üê∞</label>

            <div class="checkbox-option" id="extraMonthCheckbox" style="display:none;">
                <input type="checkbox" id="extraMonth">
                <label for="extraMonth" style="cursor: pointer; margin: 0;">+1 Month Promotion (Extend to 3 Months)</label>
            </div>

            <div class="checkbox-option" id="keyboardCheckbox" style="display:none; margin-top: 10px;">
                <input type="checkbox" id="keyboard">
                <label for="keyboard" style="cursor: pointer; margin: 0;">37-Key Keyboard ($199)</label>
            </div>

            <div id="noAddons" style="padding: 15px; text-align: center; color: #999; font-size: 14px;">
                No add-ons available for this plan
            </div>
        </div>

        <div id="v4KeyboardNote" style="display:none; background: #e7f3ff; border-left: 4px solid #2196F3; padding: 12px 15px; margin-top: 15px; border-radius: 5px; font-size: 13px; color: #1565C0;">
            <strong>‚úì V4 Plan includes 37-Key Keyboard ($99)</strong> - The keyboard fee is automatically included in your total.
        </div>

        <div id="result" style="display: none;">
            <div class="result-box">
                <div class="result-title">üê∞ Fee Breakdown üê∞</div>
                
                <div class="fee-item" id="monthsPaymentRow" style="display: none;">
                    <span class="fee-label" id="monthsPaymentLabel">Tuition Payment (3 Months)</span>
                    <span class="fee-value" id="monthsPayment">$0</span>
                </div>

                <div class="fee-item" id="monthlyFeeRow">
                    <span class="fee-label" id="monthlyFeeLabel">Monthly Tuition</span>
                    <span class="fee-value" id="monthlyFee">$0</span>
                </div>
                
                <div class="fee-item" id="depositRow">
                    <span class="fee-label">Deposit (1 Month)</span>
                    <span class="fee-value" id="deposit">$0</span>
                </div>
                
                <div class="fee-item" id="registrationFeeRow" style="display: none;">
                    <span class="fee-label">Registration Fee</span>
                    <span class="fee-value">$48</span>
                </div>
                
                <div class="fee-item" id="keyboardFeeRow" style="display: none;">
                    <span class="fee-label">37-Key Keyboard</span>
                    <span class="fee-value" id="keyboardFee">$0</span>
                </div>
                
                <div class="fee-item total-row">
                    <span class="fee-label">üê∞ Total Amount Due üê∞</span>
                    <span class="fee-value" id="totalFee">$0</span>
                </div>
            </div>

            <div class="note" id="noteSection">
                <span id="depositNote"><strong>Note:</strong> The deposit is refundable and equals one month's tuition.</span> <span id="promoNote" style="display:none;">Registration fee ($48) is included for promotional plans and is non-refundable.</span>
            </div>
        </div>

        <div style="text-align: center; margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px; color: #666; font-size: 15px; font-weight: 600;">
            üê∞ The school does not charge GST. üê∞
        </div>
    </div>

    <script>
        // Individual lesson fee structure
        const individualFeeStructure = {
            '2month': {
                '30': { weekday: 145, weekend: 160 },
                '45': { weekday: 200, weekend: 215 }
            },
            'v4': {
                '30': { weekday: 150, weekend: 165 },
                '45': { weekday: 205, weekend: 220 }
            },
            '3month': {
                '30': { weekday: 150, weekend: 165 },
                '45': { weekday: 205, weekend: 220 }
            },
            '1month': {
                '30': { weekday: 170, weekend: 185 },
                '45': { weekday: 225, weekend: 240 }
            }
        };

        // Group lesson fee structure (no duration needed)
        const groupFeeStructure = {
            'guitar': {
                '2month': { weekday: 100, weekend: 115 },
                '3month': { weekday: 105, weekend: 120 },
                '1month': { weekday: 125, weekend: 140 }
            },
            'ukulele': {
                '2month': { weekday: 80, weekend: 95 },
                '3month': { weekday: 85, weekend: 100 },
                '1month': { weekday: 105, weekend: 120 }
            },
            'singplay': {
                '2month': { weekday: 100, weekend: 115 },
                '3month': { weekday: 105, weekend: 120 },
                '1month': { weekday: 125, weekend: 140 }
            }
        };

        // Sing & Play surcharge (Individual only)
        const singPlaySurcharge = 5;

        const lessonTypeRadios = document.querySelectorAll('input[name="lessontype"]');
        const ageGroupSection = document.getElementById('ageGroupSection');
        const ageGroupRadios = document.querySelectorAll('input[name="agegroup"]');
        const individualInstrumentSection = document.getElementById('individualInstrumentSection');
        const groupInstrumentSection = document.getElementById('groupInstrumentSection');
        const individualInstrumentSelect = document.getElementById('individualInstrument');
        const groupInstrumentSelect = document.getElementById('groupInstrument');
        const durationSection = document.getElementById('durationSection');
        const planSection = document.getElementById('planSection');
        const promotionalPlansSection = document.getElementById('promotionalPlansSection');
        const durationRadios = document.querySelectorAll('input[name="duration"]');
        const dayTypeRadios = document.querySelectorAll('input[name="daytype"]');
        const planRadios = document.querySelectorAll('input[name="plan"]');
        const keyboardCheckbox = document.getElementById('keyboard');
        const extraMonthCheckbox = document.getElementById('extraMonth');
        const extraMonthCheckboxContainer = document.getElementById('extraMonthCheckbox');
        const v4Option = document.getElementById('v4Option');
        const promoPlansGrid = document.querySelector('.promo-plans-grid');
        const keyboardCheckboxContainer = document.getElementById('keyboardCheckbox');
        const noAddons = document.getElementById('noAddons');
        const v4KeyboardNote = document.getElementById('v4KeyboardNote');
        const result = document.getElementById('result');

        // Adult surcharge
        const adultSurcharge = 10;

        lessonTypeRadios.forEach(radio => radio.addEventListener('change', handleLessonTypeChange));
        ageGroupRadios.forEach(radio => radio.addEventListener('change', handleAgeGroupChange));
        individualInstrumentSelect.addEventListener('change', handleInstrumentChange);
        groupInstrumentSelect.addEventListener('change', handleInstrumentChange);
        durationRadios.forEach(radio => radio.addEventListener('change', calculateFee));
        dayTypeRadios.forEach(radio => radio.addEventListener('change', handleDayTypeChange));
        planRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                updateKeyboardVisibility();
                calculateFee();
            });
        });
        keyboardCheckbox.addEventListener('change', calculateFee);
        extraMonthCheckbox.addEventListener('change', calculateFee);

        document.getElementById('extraMonthCheckbox').addEventListener('click', function(e) {
            if (e.target.tagName !== 'INPUT') {
                extraMonthCheckbox.checked = !extraMonthCheckbox.checked;
                this.classList.toggle('checked', extraMonthCheckbox.checked);
                calculateFee();
            } else {
                this.classList.toggle('checked', extraMonthCheckbox.checked);
            }
        });

        function handleDayTypeChange() {
            const lessonType = document.querySelector('input[name="lessontype"]:checked')?.value;
            const ageGroup = document.querySelector('input[name="agegroup"]:checked')?.value;
            let hasInstrument = false;
            
            if (!ageGroup) return;
            
            if (lessonType === 'individual') {
                hasInstrument = !!individualInstrumentSelect.value;
            } else if (lessonType === 'group') {
                hasInstrument = !!groupInstrumentSelect.value;
            }
            
            if (hasInstrument) {
                planSection.style.display = 'block';
            }
            
            calculateFee();
        }

        function handleLessonTypeChange() {
            const lessonType = document.querySelector('input[name="lessontype"]:checked')?.value;
            
            if (lessonType) {
                ageGroupSection.style.display = 'block';
            } else {
                ageGroupSection.style.display = 'none';
            }
            
            // Reset subsequent sections
            individualInstrumentSection.style.display = 'none';
            groupInstrumentSection.style.display = 'none';
            durationSection.style.display = 'none';
            planSection.style.display = 'none';
            result.style.display = 'none';
            
            // Clear selections
            ageGroupRadios.forEach(radio => radio.checked = false);
            individualInstrumentSelect.value = '';
            groupInstrumentSelect.value = '';
        }

        function handleAgeGroupChange() {
            const lessonType = document.querySelector('input[name="lessontype"]:checked')?.value;
            const ageGroup = document.querySelector('input[name="agegroup"]:checked')?.value;
            
            if (!ageGroup) return;
            
            if (lessonType === 'individual') {
                individualInstrumentSection.style.display = 'block';
                groupInstrumentSection.style.display = 'none';
                durationSection.style.display = 'block';
                promotionalPlansSection.style.display = 'block';
            } else if (lessonType === 'group') {
                individualInstrumentSection.style.display = 'none';
                groupInstrumentSection.style.display = 'block';
                durationSection.style.display = 'none';
                promotionalPlansSection.style.display = 'block';
                promoPlansGrid.classList.add('single-button');
                v4Option.classList.remove('visible');
            }
            
            // Recalculate fee if result was already showing
            calculateFee();
        }

        function handleInstrumentChange() {
            const lessonType = document.querySelector('input[name="lessontype"]:checked')?.value;
            const dayType = document.querySelector('input[name="daytype"]:checked')?.value;
            
            if (lessonType === 'individual') {
                const instrument = individualInstrumentSelect.value;
                if (!instrument) {
                    planSection.style.display = 'none';
                    return;
                }
                
                if (instrument === 'piano') {
                    v4Option.classList.add('visible');
                    promoPlansGrid.classList.remove('single-button');
                } else {
                    v4Option.classList.remove('visible');
                    promoPlansGrid.classList.add('single-button');
                    document.getElementById('planV4').checked = false;
                }
            } else if (lessonType === 'group') {
                const instrument = groupInstrumentSelect.value;
                if (!instrument) {
                    planSection.style.display = 'none';
                    return;
                }
            }
            
            // Show plan section if day type is selected
            if (dayType) {
                planSection.style.display = 'block';
            }
            
            calculateFee();
        }

        document.getElementById('keyboardCheckbox').addEventListener('click', function(e) {
            if (e.target.tagName !== 'INPUT') {
                keyboardCheckbox.checked = !keyboardCheckbox.checked;
                this.classList.toggle('checked', keyboardCheckbox.checked);
                calculateFee();
            } else {
                this.classList.toggle('checked', keyboardCheckbox.checked);
            }
        });

        function updateKeyboardVisibility() {
            const lessonType = document.querySelector('input[name="lessontype"]:checked')?.value;
            const instrument = individualInstrumentSelect.value;
            const plan = document.querySelector('input[name="plan"]:checked')?.value;
            
            let hasAddons = false;
            
            // Show +1 Month add-on for First 2 Month Promotion
            if (plan === '2month') {
                extraMonthCheckboxContainer.style.display = 'flex';
                hasAddons = true;
            } else {
                extraMonthCheckboxContainer.style.display = 'none';
                extraMonthCheckbox.checked = false;
            }
            
            // Keyboard only available for individual piano lessons
            if (lessonType === 'individual' && instrument === 'piano' && plan === '2month') {
                keyboardCheckboxContainer.style.display = 'flex';
                v4KeyboardNote.style.display = 'none';
                hasAddons = true;
            } else if (lessonType === 'individual' && instrument === 'piano' && plan === 'v4') {
                // V4 includes keyboard, show note instead of checkbox
                keyboardCheckboxContainer.style.display = 'none';
                keyboardCheckbox.checked = false;
                v4KeyboardNote.style.display = 'block';
                hasAddons = false;
            } else {
                keyboardCheckboxContainer.style.display = 'none';
                keyboardCheckbox.checked = false;
                v4KeyboardNote.style.display = 'none';
            }
            
            // Show "No add-ons" message if no add-ons are available
            if (hasAddons || plan === 'v4') {
                noAddons.style.display = 'none';
            } else {
                noAddons.style.display = 'block';
            }
        }

        function calculateFee() {
            const lessonType = document.querySelector('input[name="lessontype"]:checked')?.value;
            const ageGroup = document.querySelector('input[name="agegroup"]:checked')?.value;
            const dayType = document.querySelector('input[name="daytype"]:checked')?.value;
            const plan = document.querySelector('input[name="plan"]:checked')?.value;

            if (!lessonType || !ageGroup || !dayType || !plan) {
                result.style.display = 'none';
                return;
            }

            let monthlyTuition = 0;
            let instrument = '';
            
            if (lessonType === 'individual') {
                instrument = individualInstrumentSelect.value;
                const duration = document.querySelector('input[name="duration"]:checked')?.value;
                
                if (!instrument || !duration) {
                    result.style.display = 'none';
                    return;
                }
                
                // V4 plan only available for individual piano
                if (plan === 'v4' && instrument !== 'piano') {
                    result.style.display = 'none';
                    return;
                }
                
                monthlyTuition = individualFeeStructure[plan][duration][dayType];
                
                // Apply Sing & Play surcharge for individual lessons
                if (instrument === 'singplay') {
                    monthlyTuition += singPlaySurcharge;
                }
            } else if (lessonType === 'group') {
                instrument = groupInstrumentSelect.value;
                
                if (!instrument) {
                    result.style.display = 'none';
                    return;
                }
                
                // Group lessons don't have V4 plan
                if (plan === 'v4') {
                    result.style.display = 'none';
                    return;
                }
                
                // Map guitar types to 'guitar' for fee lookup
                let instrumentKey = instrument;
                if (instrument.startsWith('guitar_')) {
                    instrumentKey = 'guitar';
                }
                
                monthlyTuition = groupFeeStructure[instrumentKey][plan][dayType];
            }
            
            // Apply adult surcharge
            if (ageGroup === 'adult') {
                monthlyTuition += adultSurcharge;
            }
            
            let deposit = 0;
            let registrationFee = 0;
            let keyboardFee = 0;
            let tuitionPayment = monthlyTuition;
            let monthsCount = 1;

            // Deposit only for promotional plans (2month and v4)
            if (plan === '2month' || plan === 'v4') {
                deposit = monthlyTuition;
                document.getElementById('depositRow').style.display = 'flex';
                document.getElementById('depositNote').style.display = 'inline';
            } else {
                deposit = 0;
                document.getElementById('depositRow').style.display = 'none';
                document.getElementById('depositNote').style.display = 'none';
            }

            // Handle multi-month payment plans with detailed breakdown
            if (plan === 'v4') {
                monthsCount = 4;
                tuitionPayment = monthlyTuition * 4;
                document.getElementById('monthsPaymentRow').style.display = 'flex';
                document.getElementById('monthsPaymentLabel').textContent = 'Tuition Payment (4 Months)';
                document.getElementById('monthsPayment').textContent = '$' + tuitionPayment + ' ($' + monthlyTuition + ' √ó 4)';
                document.getElementById('monthlyFeeRow').style.display = 'none';
            } else if (plan === '3month') {
                monthsCount = 3;
                tuitionPayment = monthlyTuition * 3;
                document.getElementById('monthsPaymentRow').style.display = 'flex';
                document.getElementById('monthsPaymentLabel').textContent = 'Tuition Payment (3 Months)';
                document.getElementById('monthsPayment').textContent = '$' + tuitionPayment + ' ($' + monthlyTuition + ' √ó 3)';
                document.getElementById('monthlyFeeRow').style.display = 'none';
            } else if (plan === '2month') {
                // First 2 Month Promotion pays 2 months (with optional +1 month)
                if (extraMonthCheckbox.checked) {
                    monthsCount = 3;
                    tuitionPayment = monthlyTuition * 3;
                    document.getElementById('monthsPaymentRow').style.display = 'flex';
                    document.getElementById('monthsPaymentLabel').textContent = 'Tuition Payment (3 Months)';
                    document.getElementById('monthsPayment').textContent = '$' + tuitionPayment + ' ($' + monthlyTuition + ' √ó 3)';
                    document.getElementById('monthlyFeeRow').style.display = 'none';
                } else {
                    monthsCount = 2;
                    tuitionPayment = monthlyTuition * 2;
                    document.getElementById('monthsPaymentRow').style.display = 'flex';
                    document.getElementById('monthsPaymentLabel').textContent = 'Tuition Payment (2 Months)';
                    document.getElementById('monthsPayment').textContent = '$' + tuitionPayment + ' ($' + monthlyTuition + ' √ó 2)';
                    document.getElementById('monthlyFeeRow').style.display = 'none';
                }
            } else {
                document.getElementById('monthsPaymentRow').style.display = 'none';
                document.getElementById('monthlyFeeRow').style.display = 'flex';
            }

            // Handle registration fee - auto-include for promotional plans
            if (plan === '2month' || plan === 'v4') {
                registrationFee = 48;
                document.getElementById('registrationFeeRow').style.display = 'flex';
                document.getElementById('promoNote').style.display = 'inline';
            } else {
                registrationFee = 0;
                document.getElementById('registrationFeeRow').style.display = 'none';
                document.getElementById('promoNote').style.display = 'none';
            }

            // Handle V4 keyboard (only for individual piano)
            if (plan === 'v4' && lessonType === 'individual' && instrument === 'piano') {
                keyboardFee = 99;
                document.getElementById('keyboardFeeRow').style.display = 'flex';
                document.getElementById('keyboardFee').textContent = '$99';
            }
            // Handle First 2 Month keyboard add-on (only for individual piano)
            else if (keyboardCheckbox.checked && plan === '2month' && lessonType === 'individual' && instrument === 'piano') {
                keyboardFee = 199;
                document.getElementById('keyboardFeeRow').style.display = 'flex';
                document.getElementById('keyboardFee').textContent = '$199';
            } else {
                document.getElementById('keyboardFeeRow').style.display = 'none';
            }

            const total = tuitionPayment + deposit + registrationFee + keyboardFee;

            document.getElementById('monthlyFee').textContent = '$' + monthlyTuition;
            document.getElementById('deposit').textContent = '$' + deposit;
            document.getElementById('totalFee').textContent = '$' + total;

            result.style.display = 'block';
        }
    </script>
</body>
</html>
